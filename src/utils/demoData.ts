/**
 * Demo data for MedAssyst application
 * Used when backend is not available for hackathon presentation
 */

// Sample symptom-diagnosis mapping
type SymptomMapping = {
  keywords: string[];
  diagnosis: string;
  severity: number; // 1-3 (low-high)
};

// Collection of predefined symptom-diagnosis mappings
export const DEMO_DIAGNOSES: SymptomMapping[] = [
  {
    keywords: ['головн', 'боль', 'голова болит', 'мигрень', 'headache'],
    diagnosis: 
`Предварительный диагноз: Головная боль напряжения или мигрень

На основе ваших симптомов, вероятно, у вас головная боль напряжения или мигрень. Головная боль напряжения обычно ощущается как давление или сжатие вокруг головы, в то время как мигрень часто сопровождается пульсирующей болью, часто с одной стороны головы.

Рекомендации:
1. Отдых в тихом, темном помещении
2. Применение холодного компресса на лоб или шею
3. Прием обезболивающих препаратов (парацетамол, ибупрофен)
4. Избегайте потенциальных триггеров (стресс, недостаток сна, определенные продукты)
5. Обеспечьте достаточную гидратацию

Степень срочности: Низкая (при отсутствии дополнительных симптомов)

Обратитесь к врачу если:
- Головная боль очень сильная и внезапная
- Сопровождается лихорадкой, ригидностью шеи, спутанностью сознания
- Появляется после травмы головы
- Сопровождается судорогами или потерей сознания`,
    severity: 1
  },
  {
    keywords: ['темпер', 'жар', 'лихорад', 'озноб', 'fever', 'temperature'],
    diagnosis: 
`Предварительный диагноз: Лихорадка (повышенная температура тела)

Повышенная температура тела (лихорадка) обычно является защитной реакцией организма на инфекцию. Сама по себе она не является заболеванием, а представляет собой симптом.

Возможные причины:
- Вирусная инфекция (грипп, ОРВИ, COVID-19)
- Бактериальная инфекция
- Воспалительные процессы в организме

Рекомендации:
1. Обеспечьте покой и обильное питье
2. Применяйте жаропонижающие препараты при температуре выше 38.5°C (парацетамол, ибупрофен)
3. Легкая одежда и прохладные компрессы при высокой температуре
4. Следите за другими сопутствующими симптомами

Степень срочности: Средняя

Обратитесь к врачу если:
- Температура выше 39.0°C не снижается после приема жаропонижающих
- Лихорадка сохраняется более 3 дней
- Появляется сыпь, затрудненное дыхание или сильная боль
- У вас есть хронические заболевания или ослабленный иммунитет`,
    severity: 2
  },
  {
    keywords: ['кашель', 'кашл', 'горло', 'насморк', 'cough', 'cold'],
    diagnosis: 
`Предварительный диагноз: Острая респираторная вирусная инфекция (ОРВИ)

На основе ваших симптомов, вероятно, у вас ОРВИ. Это группа вирусных заболеваний, поражающих дыхательные пути.

Возможные причины:
- Риновирусы
- Коронавирусы (включая SARS-CoV-2)
- Вирусы гриппа и парагриппа
- Аденовирусы

Рекомендации:
1. Отдых и обильное питье
2. Симптоматическое лечение (препараты от кашля, средства от насморка)
3. Применение жаропонижающих при повышенной температуре
4. Увлажнение воздуха в помещении
5. Полоскание горла солевым раствором при боли в горле

Степень срочности: Низкая (при отсутствии тяжелых симптомов)

Обратитесь к врачу если:
- Симптомы ухудшаются или сохраняются более 7-10 дней
- Появляется затрудненное дыхание или одышка
- Температура выше 39.0°C
- Сильная боль в груди
- Появляются признаки обезвоживания`,
    severity: 1
  },
  {
    keywords: ['боль в животе', 'живот', 'тошнот', 'рвот', 'понос', 'диарея', 'stomach', 'nausea', 'vomit', 'diarrhea'],
    diagnosis: 
`Предварительный диагноз: Гастроэнтерит (пищевое отравление или кишечная инфекция)

На основе ваших симптомов, возможно, у вас гастроэнтерит - воспаление желудка и кишечника, чаще всего вызванное вирусной или бактериальной инфекцией, либо некачественной пищей.

Возможные причины:
- Вирусная инфекция (ротавирус, норовирус)
- Бактериальная инфекция (сальмонелла, кишечная палочка)
- Пищевое отравление
- Непереносимость определенных продуктов

Рекомендации:
1. Обильное питье малыми порциями для предотвращения обезвоживания
2. Постепенное введение легкой пищи (рис, тосты, бананы)
3. Избегайте молочных продуктов, кофеина, алкоголя и острой пищи
4. При необходимости - препараты от диареи и тошноты по рекомендации врача
5. Тщательная гигиена рук для предотвращения распространения инфекции

Степень срочности: Средняя

Обратитесь к врачу если:
- Симптомы сохраняются более 2-3 дней
- Наблюдается кровь в стуле или рвотных массах
- Сильная боль в животе
- Признаки обезвоживания (сухость во рту, снижение мочеиспускания)
- Высокая температура`,
    severity: 2
  },
  {
    keywords: ['аллерг', 'сыпь', 'зуд', 'покраснение', 'чих', 'allergy', 'rash', 'itch'],
    diagnosis: 
`Предварительный диагноз: Аллергическая реакция

На основе ваших симптомов, у вас наблюдается аллергическая реакция. Аллергия - это повышенная чувствительность иммунной системы на определенные вещества (аллергены).

Возможные причины:
- Пыльца растений (сезонная аллергия)
- Пищевые продукты
- Лекарственные препараты
- Домашняя пыль и клещи
- Шерсть животных
- Укусы насекомых

Рекомендации:
1. Избегайте контакта с выявленным аллергеном
2. Применение антигистаминных препаратов
3. При кожных проявлениях - используйте гипоаллергенные средства по уходу
4. Смена рациона при пищевой аллергии
5. Увлажнение и проветривание помещений

Степень срочности: Низкая (при легкой форме)

Обратитесь к врачу немедленно если:
- Появляется отек лица, губ, языка
- Возникает затрудненное дыхание или хрипы
- Развивается слабость, головокружение
- Появляется распространенная сыпь
- Есть подозрение на анафилактический шок`,
    severity: 1
  },
  {
    keywords: ['одышка', 'дыш', 'дыхание', 'затрудненное', 'задых', 'breath', 'breathing'],
    diagnosis: 
`Предварительный диагноз: Респираторная дисфункция

На основе ваших симптомов, у вас наблюдается нарушение дыхательной функции. Затрудненное дыхание или одышка могут быть признаками различных состояний, от легких до угрожающих жизни.

Возможные причины:
- Астма
- Хроническая обструктивная болезнь легких (ХОБЛ)
- Пневмония или бронхит
- Сердечная недостаточность
- Тревожное расстройство (панические атаки)
- COVID-19 или другие респираторные инфекции

Рекомендации:
1. Покой и обеспечение доступа свежего воздуха
2. Положение сидя с опорой на руки для облегчения дыхания
3. Использование предписанных ингаляторов при наличии
4. Избегайте триггеров (аллергены, физическая нагрузка, холодный воздух)

Степень срочности: Высокая

Обратитесь к врачу немедленно если:
- Одышка возникла внезапно и сильно выражена
- Сопровождается болью в груди
- Появляется цианоз (синюшность) губ или ногтей
- Имеется лихорадка и кашель с мокротой
- Затрудненное дыхание в покое
- Есть история сердечно-сосудистых или легочных заболеваний`,
    severity: 3
  },
  {
    keywords: ['боль в груди', 'сердце', 'давит', 'давление', 'chest pain', 'heart'],
    diagnosis: 
`Предварительный диагноз: Боль в грудной клетке

ВНИМАНИЕ: Боль в груди может быть признаком серьезных, угрожающих жизни состояний и требует срочной медицинской оценки!

Возможные причины:
- Ишемическая болезнь сердца, стенокардия или инфаркт миокарда
- Перикардит (воспаление оболочки сердца)
- Расслоение аорты
- Легочная эмболия (тромб в легких)
- Пневмоторакс (скопление воздуха между легким и грудной стенкой)
- Заболевания пищевода (рефлюкс)
- Межреберная невралгия
- Тревожное расстройство (панические атаки)

Рекомендации:
1. При подозрении на сердечную причину боли - немедленно вызовите скорую помощь (103)
2. Примите положение, облегчающее боль (обычно сидя с наклоном вперед)
3. Если предписано врачом - примите нитроглицерин
4. Не принимайте пищу и жидкость до осмотра врача

Степень срочности: ВЫСОКАЯ / НЕОТЛОЖНАЯ

НЕОБХОДИМО НЕМЕДЛЕННО ОБРАТИТЬСЯ ЗА МЕДИЦИНСКОЙ ПОМОЩЬЮ ИЛИ ВЫЗВАТЬ СКОРУЮ ПОМОЩЬ если боль в груди:
- Давящая, сжимающая, жгучая
- Отдает в левую руку, шею, челюсть, спину
- Сопровождается одышкой, холодным потом, тошнотой
- Возникла внезапно и сильно выражена
- Сопровождается учащенным или нерегулярным сердцебиением
- Усиливается при физической нагрузке и уменьшается в покое`,
    severity: 3
  }
];

// Sample consultation history for demo mode
export const DEMO_HISTORY = [
  {
    id: "demo-1",
    symptoms: "У меня сильная головная боль в правой части головы уже второй день. Болеутоляющие помогают только на короткое время.",
    diagnosis: "Предварительный диагноз: Мигрень\n\nНа основе описанных симптомов, у вас вероятно мигрень - сильная головная боль, часто локализованная с одной стороны.\n\nРекомендации:\n1. Отдых в тихом, затемненном помещении\n2. Прием противомигренозных препаратов (по назначению врача)\n3. Применение холодного компресса на лоб\n4. Избегание триггеров (яркий свет, шум, стресс)\n\nСтепень срочности: низкая\n\nОбратитесь к неврологу для подтверждения диагноза и назначения специфического лечения.",
    created_at: getDateDaysAgo(5),
    severity: 1
  },
  {
    id: "demo-2",
    symptoms: "Температура 38.5, болит горло, насморк и кашель уже 3 дня. Слабость и головная боль.",
    diagnosis: "Предварительный диагноз: Острая респираторная вирусная инфекция (ОРВИ)\n\nВаши симптомы указывают на вирусную инфекцию верхних дыхательных путей.\n\nРекомендации:\n1. Постельный режим и обильное питье\n2. Жаропонижающие при температуре выше 38.5°C\n3. Симптоматическое лечение (средства от насморка, кашля, боли в горле)\n4. Увлажнение воздуха в помещении\n\nСтепень срочности: средняя\n\nОбратитесь к врачу, если симптомы усиливаются, появляется затрудненное дыхание или температура держится более 3-4 дней.",
    created_at: getDateDaysAgo(12),
    severity: 2
  },
  {
    id: "demo-3",
    symptoms: "Внезапная острая боль в груди, отдает в левую руку. Чувствую одышку и слабость. Мне 56 лет, есть гипертония.",
    diagnosis: "Предварительный диагноз: Подозрение на острый коронарный синдром (возможный инфаркт миокарда)\n\nОписанные вами симптомы требуют НЕМЕДЛЕННОЙ медицинской помощи!\n\nРекомендации:\n1. НЕМЕДЛЕННО ВЫЗОВИТЕ СКОРУЮ ПОМОЩЬ (103)\n2. Примите 0.25 г аспирина (разжевать)\n3. Примите нитроглицерин, если он у вас есть\n4. Сохраняйте покой до приезда врачей\n\nСтепень срочности: ВЫСОКАЯ / НЕОТЛОЖНАЯ\n\nЭто потенциально опасное для жизни состояние, требующее неотложной госпитализации и специализированного лечения в кардиологическом отделении.",
    created_at: getDateDaysAgo(1),
    severity: 3
  }
];

// Sample analytics data for demo mode
export const DEMO_ANALYTICS = {
  daily_counts: [
    { date: getDateDaysAgo(6), count: 1 },
    { date: getDateDaysAgo(5), count: 2 },
    { date: getDateDaysAgo(4), count: 0 },
    { date: getDateDaysAgo(3), count: 3 },
    { date: getDateDaysAgo(2), count: 1 },
    { date: getDateDaysAgo(1), count: 2 },
    { date: getDateDaysAgo(0), count: 1 }
  ],
  top_symptoms: [
    { symptom: "Головная боль", count: 4 },
    { symptom: "Повышенная температура", count: 3 },
    { symptom: "Кашель", count: 3 },
    { symptom: "Боль в горле", count: 2 },
    { symptom: "Боль в животе", count: 2 }
  ]
};

// Helper function to get date N days ago
function getDateDaysAgo(days: number): string {
  const date = new Date();
  date.setDate(date.getDate() - days);
  return date.toISOString();
}

/**
 * Get a demo diagnosis based on symptom text
 * @param symptoms Symptom text to analyze
 * @returns Diagnosis response with severity
 */
export function getDemoDiagnosis(symptoms: string): { diagnosis: string; severity: number } {
  // Convert to lowercase for case-insensitive matching
  const lowerSymptoms = symptoms.toLowerCase();
  
  // Find matching diagnosis
  for (const item of DEMO_DIAGNOSES) {
    // Check if any keyword matches
    if (item.keywords.some(keyword => lowerSymptoms.includes(keyword.toLowerCase()))) {
      return {
        diagnosis: item.diagnosis,
        severity: item.severity
      };
    }
  }
  
  // Default response if no specific match is found
  return {
    diagnosis: 
`Предварительный диагноз: Недостаточно информации

На основе предоставленной информации сложно установить точный предварительный диагноз. Требуется более детальное описание симптомов.

Рекомендации:
1. Опишите ваши симптомы более подробно, включая их длительность, интенсивность и сопутствующие признаки
2. Укажите, есть ли у вас хронические заболевания
3. Перечислите принимаемые лекарства, если таковые имеются
4. Для более точной оценки обратитесь к врачу

Степень срочности: Не определена

При наличии любых тревожных симптомов (сильная боль, затрудненное дыхание, потеря сознания и т.д.) немедленно обратитесь за медицинской помощью.`,
    severity: 1
  };
}
